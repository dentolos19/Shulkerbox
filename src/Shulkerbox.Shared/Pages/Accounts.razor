@page "/accounts"

<style>
    .layout {
        display: flex;
        height: 100%;
        flex-direction: column;
        gap: 1rem;
    }

    .layout .top {
        flex: 0 0 0;
    }

    .layout .bottom {
        flex: 1 0 0;
        overflow: hidden scroll;
        scrollbar-gutter: stable both-edges;
    }

    .list {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .item {
        display: flex;
        min-height: 128px;
        align-items: center;
        gap: 12px;
        overflow: hidden;
    }

    .item .image {
        aspect-ratio: 1 / 1;
    }
</style>

<MudContainer Class="layout py-4">
    <MudPaper Class="top">
        <MudToolBar>
            <MudSpacer />
            <MudButton Disabled="true" OnClick="AddMicrosoft">Add Microsoft Account</MudButton>
            <MudButton OnClick="AddOffline">Add Offline Account</MudButton>
        </MudToolBar>
    </MudPaper>

    <MudElement Class="bottom list">
        @if (UserAccounts is { Count: > 0 })
        {
            @foreach (var account in UserAccounts)
            {
                <MudPaper Class="item">
                    <MudImage Class="image" Src="@account.HeadImageUrl.ToString()" />
                    <MudElement>
                        <MudText Typo="Typo.h5">@account.Session.Username</MudText>
                        <MudText Typo="Typo.subtitle2">@account.Type</MudText>
                    </MudElement>
                    <MudSpacer />
                    <MudTooltip Text="Delete Account">
                        <MudIconButton
                            Class="mr-4"
                            Icon="@Icons.Material.Filled.DeleteForever"
                            Size="Size.Medium"
                            OnClick="() => DeleteAccount(account)" />
                    </MudTooltip>
                </MudPaper>
            }
        }
        else
        {
            <MudText Class="mt-4" Align="Align.Center">No accounts available.</MudText>
        }
    </MudElement>
</MudContainer>