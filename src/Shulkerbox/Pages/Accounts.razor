@page "/accounts"

<MudContainer Class="py-4 d-flex flex-column gap-2" Style="height: 100%">
    <MudPaper Class="flex-none">
        <MudToolBar>
            <MudButton
                StartIcon="@Icons.Custom.Brands.Microsoft"
                OnClick="LoginMicrosoftAccount">
                Login With Microsoft
            </MudButton>
            <MudSpacer />
            <MudButton
                StartIcon="@Icons.Material.Filled.Add"
                OnClick="AddOfflineAccount">
                Add Offline Account
            </MudButton>
        </MudToolBar>
    </MudPaper>
    <MudElement Class="flex-1 d-flex flex-column gap-2">
        @if (Data is { Count: > 0 })
        {
            @foreach (var account in Data)
            {
                <MudPaper Class="d-flex align-center overflow-hidden">
                    <MudImage Src="@account.GetHeadUrl()" Height="128" Style="aspect-ratio: 1" />
                    <MudElement Class="ml-4">
                        <MudText Typo="Typo.h5">@account.Username</MudText>
                        <MudText Typo="Typo.subtitle2">@account.Type</MudText>
                    </MudElement>
                    <MudSpacer />
                    <MudElement Class="mx-4 mr-2">
                        <MudTooltip Text="Select Account">
                            <MudIconButton Icon="@Icons.Material.Filled.Check" OnClick="() => SelectAccount(account)" />
                        </MudTooltip>
                        <MudTooltip Text="Delete Account">
                            <MudIconButton Icon="@Icons.Material.Filled.Delete" OnClick="() => DeleteAccount(account)" />
                        </MudTooltip>
                    </MudElement>
                </MudPaper>
            }
        }
        else
        {
            <MudElement Class="d-flex align-center align-self-center" Style="height: 100%">
                <MudText Typo="Typo.h6">No accounts found.</MudText>
            </MudElement>
        }
    </MudElement>
</MudContainer>